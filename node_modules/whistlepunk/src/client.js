var _ = require( "lodash" );
var knownAdapters = [ "" ];
module.exports = function( postal, config ) {
	config = config || {};
	var log = postal.channel( config.logChannel || "log" );
	var Logger = require( "./Logger.js" )( log );
	var adapters = [];

	return _.map( config.adapters, function( adapterCfg, name ) {
		var adapter = require( adapterPath )( adapterCfg );

		wireUp( adapterFsm, adapterCfg, channel, adapter );

		return adapter;

	} );

	if( config.jqueryHttp ) {
		adapters.push( "jqueryHttp.js" )( config.jqueryHttp )
	}

	function loggerFactory( namespace ) {
		return new Logger( namespace, adapters );
	}

	return loggerFactory;
};
